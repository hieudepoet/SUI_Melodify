# ðŸŽµ Sui AI Music Ownership dApp

> **Developer Edition â€“ Living Document**
> This README is designed so a dev team can **directly implement**, **extend**, and **iterate** on the platform.

---

## 0. Purpose of this README

This document serves as:

* ðŸ“˜ **Technical blueprint** for FE / BE / Move developers
* ðŸ§  **Business logic reference** (ownership, monetization, gamification)
* ðŸ§© **Open architecture guide** â€“ easy to extend, replace, or upgrade modules

Non-goals:

* Not a marketing doc
* Not a final spec (rules may evolve)

---

## 1. Project Vision

A decentralized GenAI music platform on **Sui** where:

* Music is generated by AI
* Music becomes an on-chain asset
* Attention generates cashflow
* Ownership and derivatives are composable

> **Music is a living on-chain asset with provenance, cashflow, and derivatives.**

Target users:

* ðŸŽ¼ Creators (AI-native musicians)
* ðŸŽ§ Listeners
* ðŸ’° Investors / Curators

---

## 2. High-level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Frontend      â”‚â—€â”€â”€â”€â”€â”€â”€â–¶â”‚   Sui Network    â”‚
â”‚    (React)       â”‚        â”‚   (Move SC)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â”‚                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Backend       â”‚â—€â”€â”€â”€â”€â”€â”€â–¶â”‚     AI Agents       â”‚
â”‚   (ExpressJS)     â”‚        â”‚ (LLM / Audio Gen)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Responsibility Split

### 3.1 Frontend (React)

**Responsibilities**:

* Wallet connection & account state
* Transaction creation & signing
* Music workspace (create, remix)
* Music playback (encrypted audio)
* Marketplace UI
* Gamification UX (badges, levels)

**Key libraries**:

* `@mysten/dapp-kit` â€“ wallet & tx signing
* `@mysten/sui/client`, `@mysten/sui/transactions`
* `@mysten/enoki` â€“ identity / session (optional)
* `@mysten/payment-kit` â€“ payment UX abstraction
* `@tanstack/react-query` â€“ on-chain/off-chain data
* `tailwindcss`, `shadcn/ui`, `lucide-react`
* `howler.js`, `wavesurfer.js`
* `axios`

âš ï¸ FE never holds private keys or funds.

---

### 3.2 Move Smart Contracts

**Responsibilities**:

* Asset ownership
* Monetization logic
* Royalty enforcement
* Capability-based access control
* Treasury accounting

**Key concepts**:

* Asset-centric design (Sui-native)
* Capabilities instead of roles
* No off-chain trust assumptions

**Privacy layer**:

* SEAL for encrypted content access

---

### 3.3 Backend (ExpressJS)

**Responsibilities**:

* AI orchestration
* Prompt processing
* Metadata caching
* Indexing on-chain state

**Non-responsibilities**:

* âŒ No custody of user funds
* âŒ No ownership authority

**Tech stack**:

* ExpressJS
* PostgreSQL / Supabase (optional)
* Walrus / IPFS SDK

---

### 3.4 AI Agents

**Responsibilities**:

* Text â†’ Audio
* Image â†’ Prompt â†’ Audio
* Remix generation

**Suggested stack**:

* LLM: OpenAI / Gemini
* Audio API: Suno, AudioCraft, Riffusion

---

## 4. On-chain Module Architecture (MVP)

```
move/
â”œâ”€â”€ music.move         // Core music asset
â”œâ”€â”€ listen.move        // Pay-to-listen & ListenCap
â”œâ”€â”€ remix.move         // Remix & lineage
â”œâ”€â”€ subscription.move  // Tier & access control
â”œâ”€â”€ marketplace.move  // Buy/sell & royalty
â”œâ”€â”€ badge.move         // Gamification
â””â”€â”€ treasury.move     // Platform economy
```

### Module Design Rules

* `music` MUST NOT depend on marketplace or listen
* Caps are transferable only if intended
* Each module owns its invariants

---

## 5. Core On-chain Objects

### Music

* Represents a song
* Ownable, tradable
* Has revenue pool
* Supports parent (remix)

### ListenCap

* Minted per listen
* Time-bounded
* Used for access & gamification

### RemixCap

* Grants permission to remix
* Enforces derivative rules

### SubscriptionCap

* Tiered access
* Anti-sybil primitive

### Badge

* Reputation & boosts
* Can be bound to Music or User

---

## 6. Core Business Flows

### 6.1 Music Creation

```
User â†’ AI Gen â†’ Upload Audio â†’ create_music()
                         â†’ Music(Draft)
                         â†’ publish()
```

Rules:

* Royalty capped
* Draft music not monetized

---

### 6.2 Listening & Monetization

```
listen() â†’ Pay SUI â†’ Mint ListenCap
        â†’ Split fee:
            - Music pool
            - Treasury
            - Parent (if remix)
```

Anti-abuse:

* ListenCap expiry
* Subscription gating

---

### 6.3 Subscription

* Free / Creator / Pro / Investor tiers
* Fee reduction
* Feature unlock

---

### 6.4 Remix

* Requires RemixCap
* New Music inherits parent
* Parent auto-royalty

---

### 6.5 Marketplace

* List â†’ Buy â†’ Transfer
* Royalty auto-split
* Badge follows Music

---

### 6.6 Gamification

* Badges from on-chain activity
* Boost discoverability
* Unlock features

---

## 7. Backend Architecture (ExpressJS)

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/   // HTTP handlers
â”‚   â”œâ”€â”€ services/      // AI, storage, indexer
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ jobs/          // sync on-chain
â”‚   â””â”€â”€ app.js
```

---

## 8. Frontend Architecture

```
frontend/
â”œâ”€â”€ pages/
â”œâ”€â”€ components/
â”œâ”€â”€ lib/        // sui, audio, seal
â”œâ”€â”€ services/
â””â”€â”€ stores/
```

---

## 9. MVP Scope

### Included

* AI music creation
* On-chain publishing
* Pay-to-listen
* Remix
* Marketplace
* Subscription
* Basic gamification

### Excluded (by design)

* Token
* DAO
* Fractional ownership

---

## 10. Open Extension Points

Designed to extend:

* New AI providers
* New monetization models
* DAO governance
* DeFi primitives

---

## 11. Development Guidelines

* Prefer composability over optimization
* Keep core logic on-chain
* Move fast in off-chain layers
* Avoid premature DAO/token

---

## 12. Status

ðŸš§ MVP architecture ready for development

---

## 13. UML & System Diagrams

This section provides **visual references** for architecture and core flows. Diagrams are written in **Mermaid** so they can be rendered directly in GitHub / Markdown tools.

---

### 13.1 System Architecture (Component Diagram)

```mermaid
flowchart LR
    User((User))
    FE[Frontend
React + Sui dApp Kit]
    BE[Backend
ExpressJS]
    AI[AI Agents
LLM / Audio Gen]
    Chain[Sui Network
Move Smart Contracts]
    Storage[Walrus / IPFS
Audio + Metadata]

    User --> FE
    FE -->|Sign Tx| Chain
    FE -->|REST / WS| BE
    BE --> AI
    BE --> Storage
    FE -->|Stream Audio| Storage
    BE -->|Index / Query| Chain
```

---

### 13.2 On-chain Object Model (UML-style)

```mermaid
classDiagram
    class Music {
        UID id
        address creator
        vector<ID> parents
        u64 royalty_bps
        u64 revenue
        bool published
    }

    class ListenCap {
        UID id
        ID music_id
        address listener
        u64 expiry
    }

    class RemixCap {
        UID id
        ID parent_music_id
        address holder
    }

    class SubscriptionCap {
        UID id
        u8 tier
        u64 expiry
    }

    class Badge {
        UID id
        string badge_type
        u64 boost_value
    }

    Music "1" <-- "many" ListenCap : generates
    Music "1" <-- "many" RemixCap : allows
    Music "1" <-- "many" Badge : enhanced_by
    SubscriptionCap "1" <-- "many" ListenCap : reduces_fee
```

---

### 13.3 Music Creation Sequence

```mermaid
sequenceDiagram
    participant User
    participant FE as Frontend
    participant BE as Backend
    participant AI as AI Agent
    participant Store as Walrus/IPFS
    participant Chain as Sui

    User->>FE: Enter prompt / config
    FE->>BE: Request generation
    BE->>AI: Generate audio
    AI-->>BE: Audio output
    BE->>Store: Upload audio
    Store-->>BE: Audio URI
    FE->>Chain: create_music(uri, royalty)
    Chain-->>FE: Music object minted (Draft)
```

---

### 13.4 Pay-to-Listen Flow

```mermaid
sequenceDiagram
    participant User
    participant FE
    participant Chain
    participant Treasury

    User->>FE: Click Listen
    FE->>Chain: listen(music_id, payment)
    Chain->>Chain: Mint ListenCap
    Chain->>Treasury: Split fees
    Chain-->>FE: Playback authorized
```

---

### 13.5 Remix & Derivative Flow

```mermaid
sequenceDiagram
    participant User
    participant FE
    participant Chain

    User->>FE: Request remix
    FE->>Chain: Mint RemixCap
    FE->>Chain: remix(parent_music)
    Chain->>Chain: Create child Music
    Chain-->>FE: Lineage linked
```

---

### 13.6 Marketplace & Ownership Transfer

```mermaid
sequenceDiagram
    participant Seller
    participant Buyer
    participant FE
    participant Chain

    Seller->>FE: List music
    FE->>Chain: list(music, price)
    Buyer->>FE: Buy music
    FE->>Chain: purchase()
    Chain->>Chain: Split royalty
    Chain-->>Buyer: Ownership transferred
```

---

### 13.7 Subscription & Access Control

```mermaid
sequenceDiagram
    participant User
    participant FE
    participant Chain

    User->>FE: Subscribe tier
    FE->>Chain: subscribe(tier)
    Chain->>Chain: Mint SubscriptionCap
    Chain-->>FE: Features unlocked
```

---

### 13.8 Gamification & Badge Minting

```mermaid
sequenceDiagram
    participant User
    participant Chain

    User->>Chain: On-chain activity
    Chain->>Chain: Evaluate rules
    Chain->>Chain: Mint Badge
```

---

> **Note**: These diagrams are intended as a living reference. Developers are encouraged to update them as modules evolve.

---

> **This protocol turns music into a programmable financial primitive.**
